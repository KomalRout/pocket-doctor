package com.example.tanisha.pocketdoctor; import android.content.Context; import android.content.Intent; import android.database.Cursor; import android.database.sqlite.SQLiteDatabase; import android.os.Bundle; import android.support.v7.app.AppCompatActivity; import android.view.View; import android.widget.EditText; import android.widget.Toast; public class LoginActivity extends AppCompatActivity { SQLiteDatabase db; @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_login); } public void Login(View view) { String email = ((EditText) findViewById(R.id.loginusername)).getText().toString(); String password = ((EditText) findViewById(R.id.loginpassword)).getText().toString(); db = openOrCreateDatabase("pocketdoctor.db", Context.MODE_PRIVATE, null); Cursor cursor = db.rawQuery("SELECT EMAIL,PASSWORD FROM USER", null); int flag = 0; if (cursor.moveToFirst()) { do { if (cursor.getString(0).equals(email) && cursor.getString(1).equals(password)) { Toast.makeText(getApplicationContext(), "Login Successful", Toast.LENGTH_LONG).show(); flag = 1; } } while (cursor.moveToNext() && flag == 0); } if (flag == 1) { Intent intent = new Intent(this, SearchActivity.class); Bundle b = new Bundle(); b.putString("email", email); intent.putExtras(b); startActivity(intent); } else { Toast.makeText(getApplicationContext(), "Wrong Credentials!!", Toast.LENGTH_LONG).show(); } } public void ForgotPassword(View view) { startActivity(new Intent(this,ForgotPassword.class)); } public void Register(View view) {
startActivity(new Intent(this,Register.class)); } }
